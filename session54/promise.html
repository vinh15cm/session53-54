<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- Promise: sinh ra giúp giải quyết các tác vụ bất đồng bộ
        giúp giải quyết bất đồng bộ mà bị callback-hell (dùng callback)
        code nhìn gọn gàng , dễ chỉnh sửa , bảo trì hơn
        Promise sinh ra ở phiên bản ES6-2015
        1, cú pháp
        let promise = new promise()
        khởi tạo đối tượng object constructor
        đối số của new Promise nhận vào 1 cái hàm
        1,resolve: giải quyết-thành công
        2,reject: từ chối - thất bại
     -->
    <script>
        // settimeout(()=>{
        //     console.log("111");
        //     setT 
        // })
        //khởi tạo promise
        let promise = new Promise((resolve, reject) => {
            // viết logic xử lí code
            // nếu logic thành công , gọi resolve--> nhảy vào .then
            // nếu logic thất bại , gọi reject--> nhảy vào .catch
            // console.log("promise",promise)
            // resolve([1, 2, 3]);
            // những tác vụ gọi sever , tương tác dâta base
            reject("lỗi")
        })
        // khởi tạo 1 promise thì nó đang ở trạng thái pending(xử lí)
        promise
            .then(data => {
                console.log("khi thành công trở về data")
            })
            .catch(err => {
                console.log(err)
            })
        let newPromise = new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve()
            }, 1000)
        })
        newPromise
            .then(() => {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        console.log("2222222")
                        resolve()
                    }, 1000)
                })

            })
            .then(() => {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        console.log("333333")
                        resolve()
                    }, 1000)
                })

            })


        // bên trong .then có nhiều phưong thức . then khác 
        // kết quả trả về của then đầu là tham số đầu vào của then sau
    </script>
</body>

</html>